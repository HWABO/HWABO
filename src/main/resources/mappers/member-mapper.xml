<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="memberMapper">
	<resultMap id="resultMember" type="Member">
		<id property="ucode" column="ucode" />
		<result property="uemail" column="uemail" />
		<result property="upwd" column="upwd" />
		<result property="uname" column="uname" />
		<result property="uphone" column="uphone" />
		<result property="ugroup" column="ugroup" />
		<result property="urole" column="urole" />
		<result property="ust" column="ust" />
		<result property="ucert" column="ucert" />
		<result property="udate" column="udate" />
		<result property="signtype" column="signtype" />
		<result property="accesstoken" column="accesstoken" />
		<result property="uimg" column="uimg" />
		<result property="uactive" column="uactive" />
		<result property="pnum" column="pnum" />
		<result property="pjadmin" column="pjadmin" />
	</resultMap>

	<resultMap id="resultInvite" type="Invite">
		<id property="invtkey" column="invtkey" />
		<result property="ucode" column="ucode" />
		<result property="pnum" column="pnum" />
		<result property="invtemail" column="invtemail" />
		<result property="invtuse" column="invtuse" />
		<result property="exprtdate" column="exprtdate" />
	</resultMap>

	<insert id="insertUser" parameterType="Member">
		insert into member (ucode,
		uemail, upwd, uname, signtype, accesstoken, uimg)
		values ('h' ||
		member_seq.nextval, #{uemail}, #{upwd}, #{uname}, 'h', #{accesstoken},
		#{uimg})
	</insert>

	<select id="selectLogin" parameterType="Member"
		resultType="Member">
		select * from member
		where uemail = #{uemail} and signtype= 'h'
	</select>
	
	<select id="selectreal" parameterType="string" resultType="_int">
		select count(*) from member`
		where uemail = #{uemia
	</select>
	<update id="updateUst" parameterType="Member">
		update member
		set ust='Y'
		where uemail = #{uemail} and accesstoken = #{accesstoken}
	</update>

	<select id="chk_id" parameterType="string" resultType="_int">
		select
		count(*) from member where uemail = #{uemail} and signtype= 'h'
	</select>

	<select id="selectMember" parameterType="String"
		resultType="Member">
		select * from member where ucode = #{ucode}
	</select>

	<update id="updateInfo" parameterType="Member">
		update member
		set uname = #{uname}, uphone = #{uphone}, ugroup = #{ugroup}, urole =
		#{urole}
		where ucode = #{ucode}
	</update>
	
	<update id="updateImg" parameterType="String">
		update member
		set uimg = #{uimg}
		where ucode = #{ucode}
	</update>

	<update id="updatePwd" parameterType="string">
		update member
		set upwd = #{upwd}
		where ucode = #{ucode}
	</update>
	<delete id="deleteUser" parameterType="string">
		delete member
		where ucode = #{ucode}
	</delete>

	<insert id="insertInvtNew" parameterType="Invite">
		insert into invite
		values(#{invtkey}, #{ucode}, #{pnum}, #{invtemail}, default, default)
	</insert>

	<!-- <select id="NotPjMember" parameterType="string" resultMap="Member"> 
		select * from member left join pjmember using (ucode) where pnum != #{pnum} 
		</select> -->

</mapper>
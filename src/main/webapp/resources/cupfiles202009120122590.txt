DROP TABLE MEMBER CASCADE CONSTRAINTS;

CREATE TABLE MEMBER(
    UCODE VARCHAR2(20) PRIMARY KEY,
    UEMAIL VARCHAR2(100) NOT NULL,
    UPWD VARCHAR2(60),
    UNAME VARCHAR2(30),
    UPHONE NUMBER,
    PROJECT_NUM VARCHAR2(20),
    UGROUP VARCHAR2(100),
    UROLE VARCHAR2(100),
    UST VARCHAR2(1) DEFAULT 'Y' CHECK (UST IN('Y','N')),
    UCERT VARCHAR2(1) DEFAULT 'N' NOT NULL CHECK (UCERT IN('Y', 'N')),
    UDATE DATE DEFAULT SYSDATE,
    SIGNTYPE VARCHAR2(30) CHECK (SIGNTYPE IN('h', 'g', 'n')),
    ACCESSTOKEN VARCHAR2(100),
    UIMG VARCHAR2(255),
    UACTIVE VARCHAR2(1) CHECK (UACTIVE IN('Y','N'))
);
ALTER TABLE MEMBER
ADD CONSTRAINT FK_MEMBER_PROJECT
FOREIGN KEY (PROJECT_NUM) 
REFERENCES PROJECT(PROJECT_NUM)
ON DELETE CASCADE;


CREATE UNIQUE INDEX HSIGN ON MEMBER(UEMAIL,SIGNTYPE);

CREATE SEQUENCE MEMBER_SEQ
MINVALUE 1 START WITH 1 INCREMENT BY 1;

COMMENT ON COLUMN MEMBER.UCODE IS '사용자번호';
COMMENT ON COLUMN MEMBER.UEMAIL IS '이메일';
COMMENT ON COLUMN MEMBER.UPWD IS '비밀번호';
COMMENT ON COLUMN MEMBER.UNAME IS '이름';
COMMENT ON COLUMN MEMBER.UPHONE IS '핸드폰';
COMMENT ON COLUMN MEMBER.PROJECT_NUM IS '소속된 프로젝트 번호';
COMMENT ON COLUMN MEMBER.UGROUP IS '소속';
COMMENT ON COLUMN MEMBER.UROLE IS '역할';
COMMENT ON COLUMN MEMBER.UST IS '계정상태';
COMMENT ON COLUMN MEMBER.UCERT IS '이메일 인증여부';
COMMENT ON COLUMN MEMBER.UDATE IS '사용자 등록일자';
COMMENT ON COLUMN MEMBER.SIGNTYPE IS '회원가입 타입';
COMMENT ON COLUMN MEMBER.ACCESSTOKEN IS '인증키(sns가입자)';
COMMENT ON COLUMN MEMBER.UIMG IS '내 정보 이미지';
COMMENT ON COLUMN MEMBER.UACTIVE IS '접속여부';
